# Утилита фильтрации содержимого файлов

## Описание
Консольная утилита для фильтрации содержимого файлов по типам данных (целые числа, вещественные числа, строки) с возможностью сбора статистики.

## Технические требования

- **Java версия**: 25
- **Система сборки**: Maven 4
- **Сторонние библиотеки**: не используются (только стандартная библиотека Java)

## Структура проекта

```
file-filter/
├── pom.xml
├── README.md
└── src/
    └── main/
        └── java/
            └── ru/
                └── rekklez/
                    ├── Main.java
                    ├── model/
                    │   ├── Config.java
                    │   ├── FileFilter.java
                    │   ├── LazyWriter.java
                    │   ├── Option.java
                    │   ├── Statistics.java
                    │   └── StatisticsPrinter.java
                    └── util/
                        ├── Util.java
                        └── exception/
                            ├── DuplicateDescriptionOptionException.java
                            ├── DuplicateOptionException.java
                            ├── InvalidValueException.java
                            ├── NoArgsException.java
                            └── NoFilesException.java
```

## Сборка проекта

### Компиляция с помощью Maven
```bash
mvn clean compile
```

### Создание исполняемого JAR-файла
```bash
mvn clean package
```

Готовый JAR-файл будет находиться в `target/file-filter-1.0.jar`

## Запуск

### Базовый запуск
```bash
java -jar target/file-filter-1.0.jar [опции]   ...
```

### Примеры использования

1. **Простая фильтрация без опций**
```bash
java -jar file-filter.jar input1.txt input2.txt
```

2. **С указанием выходной директории**
```bash
java -jar file-filter.jar -o ./output input1.txt input2.txt
```

3. **С префиксом имен файлов**
```bash
java -jar file-filter.jar -p result_ input1.txt input2.txt
```
Создаст файлы: `result_integers.txt`, `result_floats.txt`, `result_strings.txt`

4. **Режим добавления в существующие файлы**
```bash
java -jar file-filter.jar -a input1.txt input2.txt
```

5. **С краткой статистикой**
```bash
java -jar file-filter.jar -s input1.txt input2.txt
```

6. **С полной статистикой**
```bash
java -jar file-filter.jar -f input1.txt input2.txt
```

7. **Комбинация всех опций**
```bash
java -jar file-filter.jar -o ./results -p data_ -a -f input1.txt input2.txt input3.txt
```

## Описание опций

| Опция | Параметр | Описание | По умолчанию |
|-------|----------|----------|--------------|
| `-o` | `<путь>` | Путь для сохранения результатов | Текущая директория |
| `-p` | `<префикс>` | Префикс для имен выходных файлов | Пустая строка |
| `-a` | - | Режим добавления в существующие файлы | Перезапись |
| `-s` | - | Краткая статистика (количество элементов) | Без статистики |
| `-f` | - | Полная статистика (мин, макс, сумма, среднее) | Без статистики |

**Важно**: Опции `-s` и `-f` взаимоисключающие. Все опции должны указываться ДО списка файлов.

## Формат входных данных

Входные файлы должны содержать данные разных типов, разделенные переводом строки:

```
42
3.14
Hello World
-100
2.718
Test String
```

## Формат выходных данных

### Выходные файлы
Программа создает до 3 файлов (в зависимости от наличия данных):
- `integers.txt` (или `<префикс>integers.txt`) - целые числа
- `floats.txt` (или `<префикс>floats.txt`) - вещественные числа
- `strings.txt` (или `<префикс>strings.txt`) - строки

### Статистика

**Краткая статистика (`-s`)**:
```
Статистика для записанных целочисленных значений:
	Количество элементов: 150

Статистика для записанных чисел с плавающей точкой:
	Количество элементов: 75

Статистика для записанных строк:
	Количество элементов: 200
```

**Полная статистика (`-f`)**:
```
Статистика для записанных целочисленных значений:
	Количество элементов: 150
	Минимальное число: -1000
	Максимальное число: 9999
	Сумма всех значений: 125000
	Среднее значение: 833.33

Статистика для записанных чисел с плавающей точкой:
	Количество элементов: 75
	Минимальное число: -99.99
	Максимальное число: 999.99
	Сумма всех значений: 15000.50
	Среднее значение: 200.01

Статистика для записанных строк:
	Количество элементов: 200
	Длина самой короткой строки: 3
	Длина самой длинной строки: 150
```

## Особенности реализации

### 1. Ленивая запись (LazyWriter)
Выходные файлы создаются только при необходимости. Если во входных данных нет, например, вещественных чисел, файл `floats.txt` не будет создан.

### 2. Определение типов данных
- **Целое число**: проверяется парсингом через `Long.parseLong()`
- **Вещественное число**: проверяется парсингом через `Double.parseDouble()`
- **Строка**: всё, что не является числом

Порядок проверки: целое → вещественное → строка

### 3. Обработка ошибок
- Пустые строки и строки из пробелов игнорируются
- Несуществующие файлы пропускаются с выводом предупреждения
- При ошибке чтения одного файла обработка остальных продолжается
- Неизвестные опции игнорируются с выводом предупреждения
- Дублирующиеся опции игнорируются с выводом предупреждения

### 4. Валидация опций
- Опции с параметрами (`-o`, `-p`) проверяются на наличие значения
- Значения опций не должны совпадать с именами других опций
- Опции `-s` и `-f` взаимоисключающие
- Дублирование опций не допускается

## Примеры тестовых файлов

### input1.txt
```
100
200
Hello
3.14
World
-50
```

### input2.txt
```
2.718
Test
300
String
1.414
```

### Результат выполнения
```bash
java -jar file-filter.jar -f input1.txt input2.txt
```

**integers.txt**:
```
100
200
-50
300
```

**floats.txt**:
```
3.14
2.718
1.414
```

**strings.txt**:
```
Hello
World
Test
String
```

**Консольный вывод**:
```
Статистика для целочисленных значений:
	Количество элементов: 4
	Минимальное число: -50
	Максимальное число: 300
	Сумма всех значений: 550
	Среднее значение: 137.50

Статистика для чисел с плавающей точкой:
	Количество элементов: 3
	Минимальное число: 1.414000
	Максимальное число: 3.140000
	Сумма всех значений: 7.272000
	Среднее значение: 2.424000

Статистика для строк:
	Количество элементов: 4
	Длина самой короткой строки: 4
	Длина самой длинной строки: 6
```

## Устранение неполадок

### Ошибка: "Отсутствуют аргументы"
**Решение**: Укажите хотя бы один входной файл

### Ошибка: "Нет файлов для фильтрации"
**Решение**: Все аргументы были распознаны как опции. Убедитесь, что указали имена файлов после опций

### Ошибка: "Файл не был найден"
**Решение**: Проверьте путь к файлу. Используйте абсолютный путь или убедитесь, что файл находится в рабочей директории

### Ошибка создания выходной директории
**Решение**: Убедитесь, что у вас есть права на запись в указанную директорию
